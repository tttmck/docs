---
title: "API è®¤è¯"
description: "å¦‚ä½•å®‰å…¨åœ°ä½¿ç”¨æ™¨ç¾½æ™ºäº‘API"
icon: "key"
---

# API è®¤è¯

æ™¨ç¾½æ™ºäº‘APIä½¿ç”¨API Keyè¿›è¡Œè®¤è¯ï¼Œç¡®ä¿æ‚¨çš„è´¦æˆ·å’Œèµ„æºå®‰å…¨ã€‚æœ¬æŒ‡å—å°†è¯¦ç»†ä»‹ç»å¦‚ä½•è·å–ã€ä½¿ç”¨å’Œç®¡ç†API Keyã€‚

<Info>
  **ğŸš€ åœ¨çº¿APIæµ‹è¯•åŠŸèƒ½**: æœ¬æ–‡æ¡£æ”¯æŒåœ¨çº¿APIæµ‹è¯•ï¼åœ¨ä»»ä½•APIé¡µé¢çš„å³ä¾§ï¼Œæ‚¨éƒ½å¯ä»¥æ‰¾åˆ°API Playgroundï¼Œè¾“å…¥æ‚¨çš„API Keyåå³å¯ç›´æ¥æµ‹è¯•æ¥å£ï¼Œæ— éœ€ç¼–å†™ä»£ç ã€‚
</Info>

## è·å–API Key

### 1. ç™»å½•æ§åˆ¶å°

è®¿é—® [æ™¨ç¾½æ™ºäº‘æ§åˆ¶å°](https://www.chenyu.cn/console/apiServer) å¹¶ä½¿ç”¨æ‚¨çš„ä¼ä¸šè´¦æˆ·ç™»å½•ã€‚

### 2. åˆ›å»ºAPI Key

<Steps>
  <Step title="è¿›å…¥APIç®¡ç†">
    åœ¨æ§åˆ¶å°å·¦ä¾§å¯¼èˆªæ ä¸­ï¼Œç‚¹å‡»"APIç®¡ç†"èœå•
  </Step>
  <Step title="åˆ›å»ºæ–°å¯†é’¥">
    ç‚¹å‡»"åˆ›å»ºAPI Key"æŒ‰é’®
  </Step>
  <Step title="é…ç½®æƒé™">
    æ ¹æ®éœ€è¦è®¾ç½®API Keyçš„æƒé™èŒƒå›´
  </Step>
  <Step title="ä¿å­˜å¯†é’¥">
    å¤åˆ¶ç”Ÿæˆçš„API Keyå¹¶å¦¥å–„ä¿å­˜
  </Step>
</Steps>

<Warning>
  **é‡è¦æé†’** - è¯·å¦¥å–„ä¿ç®¡æ‚¨çš„API Keyï¼Œåˆ‡å‹¿æ³„éœ²ã€‚
</Warning>

## ä½¿ç”¨API Key

### è®¤è¯æ–¹å¼

åœ¨æ‰€æœ‰APIè¯·æ±‚ä¸­ï¼Œéœ€è¦åœ¨HTTPå¤´ä¸­åŒ…å«è®¤è¯ä¿¡æ¯ï¼š

```http
Authorization: Bearer YOUR_API_KEY
```

### å®Œæ•´è¯·æ±‚ç¤ºä¾‹

<CodeGroup>

```bash cURL
curl -X GET "https://www.chenyu.team/api/open/v2/balance/info" \
  -H "Authorization: Bearer cy_1234567890abcdef1234567890abcdef" \
  -H "Content-Type: application/json"
```

```python Python
import requests

headers = {
    "Authorization": "Bearer cy_1234567890abcdef1234567890abcdef",
    "Content-Type": "application/json"
}

response = requests.get("https://www.chenyu.team/api/open/v2/balance/info", headers=headers)
print(response.json())
```

```javascript JavaScript
const axios = require('axios');

const headers = {
    'Authorization': 'Bearer cy_1234567890abcdef1234567890abcdef',
    'Content-Type': 'application/json'
};

axios.get('https://www.chenyu.team/api/open/v2/balance/info', { headers })
    .then(response => console.log(response.data))
    .catch(error => console.error(error));
```

```go Go
package main

import (
    "fmt"
    "io"
    "net/http"
)

func main() {
    req, _ := http.NewRequest("GET", "https://www.chenyu.team/api/open/v2/balance/info", nil)
    req.Header.Set("Authorization", "Bearer cy_1234567890abcdef1234567890abcdef")
    req.Header.Set("Content-Type", "application/json")

    client := &http.Client{}
    resp, err := client.Do(req)
    if err != nil {
        panic(err)
    }
    defer resp.Body.Close()

    body, _ := io.ReadAll(resp.Body)
    fmt.Println(string(body))
}
```

</CodeGroup>

## åœ¨çº¿APIæµ‹è¯•

### ä½¿ç”¨API Playground

æœ¬æ–‡æ¡£é›†æˆäº†å¼ºå¤§çš„API PlaygroundåŠŸèƒ½ï¼Œè®©æ‚¨æ— éœ€ç¼–å†™ä»£ç å³å¯æµ‹è¯•æ‰€æœ‰APIæ¥å£ï¼š

<Steps>
  <Step title="è®¿é—®APIé¡µé¢">
    å¯¼èˆªåˆ°ä»»ä½•APIæ¥å£é¡µé¢ï¼ˆå¦‚"ä½™é¢æŸ¥è¯¢"ã€"å®ä¾‹åˆ—è¡¨"ç­‰ï¼‰
  </Step>
  <Step title="æ‰¾åˆ°API Playground">
    åœ¨é¡µé¢å³ä¾§æˆ–åº•éƒ¨æ‰¾åˆ°"API Playground"åŒºåŸŸ
  </Step>
  <Step title="è¾“å…¥API Key">
    åœ¨"Authorization"è¾“å…¥æ¡†ä¸­è¾“å…¥æ‚¨çš„API Keyï¼Œæ ¼å¼ä¸ºï¼š`Bearer your_api_key`
  </Step>
  <Step title="è®¾ç½®å‚æ•°">
    æ ¹æ®éœ€è¦å¡«å†™æŸ¥è¯¢å‚æ•°æˆ–è¯·æ±‚ä½“å‚æ•°
  </Step>
  <Step title="å‘é€è¯·æ±‚">
    ç‚¹å‡»"Try it"æŒ‰é’®å‘é€è¯·æ±‚ï¼ŒæŸ¥çœ‹å®æ—¶å“åº”ç»“æœ
  </Step>
</Steps>

### æµ‹è¯•ç¤ºä¾‹

<Tabs>
  <Tab title="GETè¯·æ±‚ç¤ºä¾‹">
    **æµ‹è¯•ä½™é¢æŸ¥è¯¢æ¥å£**:
    1. è®¿é—®"ä½™é¢æŸ¥è¯¢"é¡µé¢
    2. åœ¨Authorizationè¾“å…¥æ¡†ä¸­è¾“å…¥ï¼š`Bearer sk-xxx...`
    3. ç‚¹å‡»"Try it"æŒ‰é’®
    4. æŸ¥çœ‹è¿”å›çš„ä½™é¢ä¿¡æ¯
  </Tab>

  <Tab title="POSTè¯·æ±‚ç¤ºä¾‹">
    **æµ‹è¯•åˆ›å»ºå®ä¾‹æ¥å£**:
    1. è®¿é—®"åˆ›å»ºå®ä¾‹"é¡µé¢
    2. è¾“å…¥API Keyï¼š`Bearer sk-xxx...`
    3. å¡«å†™è¯·æ±‚å‚æ•°ï¼ˆpod_uuidã€gpu_uuidç­‰ï¼‰
    4. ç‚¹å‡»"Try it"å‘é€è¯·æ±‚
    5. æŸ¥çœ‹å®ä¾‹åˆ›å»ºç»“æœ
  </Tab>
</Tabs>

<Warning>
  **å®‰å…¨æé†’**: åœ¨å…¬å…±ç¯å¢ƒä¸­ä½¿ç”¨API Playgroundæ—¶ï¼Œè¯·æ³¨æ„ä¿æŠ¤æ‚¨çš„API Keyå®‰å…¨ã€‚æµ‹è¯•å®Œæˆåå»ºè®®æ¸…é™¤è¾“å…¥æ¡†ä¸­çš„API Keyã€‚
</Warning>

## å®‰å…¨æœ€ä½³å®è·µ

### ğŸ” API Keyç®¡ç†

<AccordionGroup>
  <Accordion title="å®‰å…¨å­˜å‚¨" icon="shield">
    - **ç¯å¢ƒå˜é‡**: å°†API Keyå­˜å‚¨åœ¨ç¯å¢ƒå˜é‡ä¸­ï¼Œä¸è¦ç¡¬ç¼–ç åˆ°ä»£ç ä¸­
    - **å¯†é’¥ç®¡ç†**: ä½¿ç”¨ä¸“ä¸šçš„å¯†é’¥ç®¡ç†ç³»ç»Ÿï¼ˆå¦‚AWS KMSã€Azure Key Vaultï¼‰
    - **ç‰ˆæœ¬æ§åˆ¶**: ç¡®ä¿API Keyä¸ä¼šæ„å¤–æäº¤åˆ°ç‰ˆæœ¬æ§åˆ¶ç³»ç»Ÿ
    - **å®¹å™¨åŒ–**: åœ¨å®¹å™¨ç¯å¢ƒä¸­ä½¿ç”¨Secretsç®¡ç†API Key
    
    ```bash
    # è®¾ç½®ç¯å¢ƒå˜é‡
    export CHENYU_API_KEY="cy_1234567890abcdef1234567890abcdef"
    
    # åœ¨ä»£ç ä¸­ä½¿ç”¨
    import os
    api_key = os.getenv('CHENYU_API_KEY')
    ```
  </Accordion>
</AccordionGroup>

### ğŸš¨ å®‰å…¨äº‹ä»¶å“åº”

å¦‚æœå‘ç°API Keyå¯èƒ½è¢«æ³„éœ²æˆ–æ»¥ç”¨ï¼Œè¯·ç«‹å³é‡‡å–ä»¥ä¸‹æªæ–½ï¼š

<Steps>
  <Step title="ç«‹å³ç¦ç”¨">
    åœ¨æ§åˆ¶å°ä¸­ç«‹å³ç¦ç”¨æˆ–åˆ é™¤ç›¸å…³çš„API Key
  </Step>
  <Step title="åˆ›å»ºæ–°å¯†é’¥">
    åˆ›å»ºæ–°çš„API Keyï¼Œå¹¶æ›´æ–°åº”ç”¨é…ç½®
  </Step>
  <Step title="è”ç³»æ”¯æŒ">
    å¦‚æœ‰å¿…è¦ï¼Œè”ç³»æŠ€æœ¯æ”¯æŒå›¢é˜Ÿè¿›è¡Œè¿›ä¸€æ­¥è°ƒæŸ¥
  </Step>
</Steps>

## è®¤è¯é”™è¯¯å¤„ç†

### å¸¸è§é”™è¯¯

<Tabs>
  <Tab title="401 Unauthorized">
    **é”™è¯¯åŸå› **:
    - API Keyæ— æ•ˆæˆ–å·²è¿‡æœŸ
    - è¯·æ±‚å¤´æ ¼å¼é”™è¯¯
    - API Keyè¢«ç¦ç”¨
    
    **è§£å†³æ–¹æ¡ˆ**:
    ```python
    # æ£€æŸ¥API Keyæ ¼å¼
    if not api_key.startswith('cy_'):
        raise ValueError("Invalid API key format")
    
    # æ£€æŸ¥è¯·æ±‚å¤´
    headers = {
        "Authorization": f"Bearer {api_key}",
        "Content-Type": "application/json"
    }
    ```
  </Tab>

  <Tab title="429 Too Many Requests">
    **é”™è¯¯åŸå› **:
    - è¯·æ±‚é¢‘ç‡è¶…è¿‡é™åˆ¶
    - å¹¶å‘è¯·æ±‚è¿‡å¤š
    
    **è§£å†³æ–¹æ¡ˆ**:
    ```python
    import time
    
    def api_call_with_retry(func, max_retries=3):
        for attempt in range(max_retries):
            try:
                return func()
            except requests.exceptions.HTTPError as e:
                if e.response.status_code == 429:
                    # ä»å“åº”å¤´è·å–é‡è¯•æ—¶é—´
                    retry_after = int(e.response.headers.get('Retry-After', 60))
                    time.sleep(retry_after)
                else:
                    raise
    ```
  </Tab>
</Tabs>

## ç¯å¢ƒé…ç½®

### å¼€å‘ç¯å¢ƒ

```python
# development.py
import os
from dotenv import load_dotenv

load_dotenv()

CHENYU_API_KEY = os.getenv('CHENYU_API_KEY_DEV')
CHENYU_BASE_URL = 'https://www.chenyu.team/api/open/v2'
```

### ç”Ÿäº§ç¯å¢ƒ

```python
# production.py
import os

# ä»ç¯å¢ƒå˜é‡æˆ–å¯†é’¥ç®¡ç†ç³»ç»Ÿè·å–
CHENYU_API_KEY = os.getenv('CHENYU_API_KEY_PROD')
CHENYU_BASE_URL = 'https://www.chenyu.team/api/open/v2'

# ç”Ÿäº§ç¯å¢ƒé¢å¤–é…ç½®
TIMEOUT = 30
MAX_RETRIES = 3
```

## æµ‹è¯•API Key

åˆ›å»ºAPI Keyåï¼Œå¯ä»¥ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤æµ‹è¯•å…¶æ˜¯å¦æ­£å¸¸å·¥ä½œï¼š

```bash
# æµ‹è¯•API Keyæ˜¯å¦æœ‰æ•ˆ
curl -X GET "https://www.chenyu.team/api/open/v2/balance/info" \
  -H "Authorization: Bearer YOUR_API_KEY" \
  -H "Content-Type: application/json"
```

æˆåŠŸå“åº”ç¤ºä¾‹ï¼š
```json
{
  "code": 0,
  "msg": "æŸ¥è¯¢æˆåŠŸ",
  "data": {
    "balance": 1000.50,
    "card_balance": 500.00
  }
}
```

---

<Info>
  **å®‰å…¨æé†’** - API Keyå…·æœ‰è®¿é—®æ‚¨è´¦æˆ·èµ„æºçš„æƒé™ï¼Œè¯·åŠ¡å¿…å¦¥å–„ä¿ç®¡ã€‚å¦‚æœ‰ä»»ä½•å®‰å…¨ç–‘é—®ï¼Œè¯·åŠæ—¶è”ç³»æŠ€æœ¯æ”¯æŒå›¢é˜Ÿã€‚
</Info>

## ç›¸å…³èµ„æº

- [å¿«é€Ÿå¼€å§‹](/userguide/quickstart) - äº†è§£å¦‚ä½•å¿«é€Ÿå¼€å§‹ä½¿ç”¨API
- [APIå‚è€ƒ](/api-reference/introduction) - æŸ¥çœ‹å®Œæ•´çš„APIæ–‡æ¡£
- [åŠŸèƒ½ä»‹ç»](/userguide/introduction) - æ·±å…¥äº†è§£å¹³å°åŠŸèƒ½
- [æŠ€æœ¯æ”¯æŒ](mailto:support@chenyu.com) - è·å–ä¸“ä¸šæŠ€æœ¯æ”¯æŒ