---
title: "API å‚è€ƒ"
description: "æ™¨ç¾½æ™ºäº‘å®Œæ•´çš„APIæ¥å£æ–‡æ¡£"
icon: "code"
---

# API å‚è€ƒ

æ¬¢è¿ä½¿ç”¨æ™¨ç¾½æ™ºäº‘APIï¼æˆ‘ä»¬æä¾›å®Œæ•´çš„RESTful APIæ¥å£ï¼Œå¸®åŠ©æ‚¨é€šè¿‡ç¼–ç¨‹æ–¹å¼ç®¡ç†GPUå®ä¾‹ã€ç›‘æ§èµ„æºä½¿ç”¨å’Œæ§åˆ¶æˆæœ¬ã€‚

## åŸºç¡€ä¿¡æ¯

### API åŸºç¡€URL

```
https://www.chenyu.team/api/open/v2
```

### è®¤è¯æ–¹å¼

æ‰€æœ‰APIè¯·æ±‚éƒ½éœ€è¦åœ¨HTTPå¤´ä¸­åŒ…å«è®¤è¯ä¿¡æ¯ï¼š

```http
Authorization: Bearer YOUR_API_KEY
```

### è¯·æ±‚æ ¼å¼

- **Content-Type**: `application/json`
- **å­—ç¬¦ç¼–ç **: UTF-8
- **è¯·æ±‚æ–¹æ³•**: GETã€POSTã€PUTã€DELETE

### å“åº”æ ¼å¼

æ‰€æœ‰APIå“åº”éƒ½é‡‡ç”¨ç»Ÿä¸€çš„JSONæ ¼å¼ï¼š

```json
{
  "code": 200,
  "message": "æ“ä½œæˆåŠŸ",
  "data": {
    // å…·ä½“çš„å“åº”æ•°æ®
  }
}
```

## API æ¦‚è§ˆ

<CardGroup cols={2}>
  <Card title="å®ä¾‹ç®¡ç†" icon="server" href="/api-reference/instance/list">
    åˆ›å»ºã€å¯åŠ¨ã€åœæ­¢ã€é‡å¯GPUå®ä¾‹ï¼Œç®¡ç†å®ä¾‹ç”Ÿå‘½å‘¨æœŸ
  </Card>
  <Card title="è´¦æˆ·ç®¡ç†" icon="user-circle" href="/api-reference/balance/info">
    æŸ¥è¯¢ä½™é¢ã€å……å€¼è®°å½•ã€è´¦å•æ˜ç»†ç­‰è´¦æˆ·ä¿¡æ¯
  </Card>
  <Card title="èµ„æºæŸ¥è¯¢" icon="cube" href="/api-reference/gpu/list">
    è·å–å¯ç”¨Podã€GPUå‹å·ã€é•œåƒç­‰èµ„æºä¿¡æ¯
  </Card>
  <Card title="Podç®¡ç†" icon="chart-line" href="/api-reference/pod/list">
    è·å–åº”ç”¨å¸‚åœºPodåˆ—è¡¨å’Œç›¸å…³ä¿¡æ¯
  </Card>
</CardGroup>

## æ ¸å¿ƒåŠŸèƒ½

### ğŸš€ å®ä¾‹ç®¡ç†

ç®¡ç†GPUå®ä¾‹çš„å®Œæ•´ç”Ÿå‘½å‘¨æœŸï¼š

```mermaid
graph LR
    A[åˆ›å»ºå®ä¾‹] --> B[å¯åŠ¨å®ä¾‹]
    B --> C[è¿è¡Œä¸­]
    C --> D[åœæ­¢å®ä¾‹]
    D --> E[é‡å¯å®ä¾‹]
    E --> C
    C --> F[é”€æ¯å®ä¾‹]
```

ä¸»è¦æ¥å£ï¼š
- `POST /api/open/v2/instance/create_by_pod` - é€šè¿‡Podåˆ›å»ºå®ä¾‹
- `POST /api/open/v2/instance/create_by_image` - é€šè¿‡é•œåƒåˆ›å»ºå®ä¾‹
- `GET /api/open/v2/instance/list` - è·å–å®ä¾‹åˆ—è¡¨
- `POST /api/open/v2/instance/startup` - å¯åŠ¨å®ä¾‹
- `POST /api/open/v2/instance/shutdown` - åœæ­¢å®ä¾‹
- `POST /api/open/v2/instance/restart` - é‡å¯å®ä¾‹

### ğŸ’° è®¡è´¹ç®¡ç†

å®æ—¶ç›‘æ§è´¹ç”¨å’Œç®¡ç†é¢„ç®—ï¼š

- `GET /api/open/v2/balance/info` - æŸ¥è¯¢è´¦æˆ·ä½™é¢
- `GET /api/open/v2/bill/list` - è·å–è´¦å•è¯¦æƒ…
- `GET /api/open/v2/recharge/list` - æŸ¥è¯¢å……å€¼è®°å½•

### ğŸ“Š èµ„æºç®¡ç†

è·å–å¹³å°èµ„æºä¿¡æ¯ï¼š

- `GET /api/open/v2/pod/list` - è·å–Podåˆ—è¡¨
- `GET /api/open/v2/gpu/list` - è·å–GPUåˆ—è¡¨
- `GET /api/open/v2/image/market_list` - è·å–å¸‚åœºé•œåƒåˆ—è¡¨

## å¿«é€Ÿå¼€å§‹

### 1. è·å–API Key

ç™»å½• [æ™¨ç¾½æ™ºäº‘æ§åˆ¶å°](https://www.chenyu.cn/console/apiServer)ï¼Œåœ¨"APIç®¡ç†"é¡µé¢åˆ›å»ºæ–°çš„APIå¯†é’¥ã€‚

### 2. å®‰è£…SDK

<CodeGroup>

```bash Python
pip install chenyu-sdk
```

```bash Node.js
npm install @chenyu/sdk
```

```bash Go
go get github.com/chenyu-ai/sdk-go
```

</CodeGroup>

### 3. åˆå§‹åŒ–å®¢æˆ·ç«¯

<CodeGroup>

```python Python
import requests

url = "https://www.chenyu.team/api/open/v2/balance/info"
headers = {
    "Authorization": "Bearer YOUR_API_KEY",
    "Content-Type": "application/json"
}

# è·å–è´¦æˆ·ä¿¡æ¯
response = requests.get(url, headers=headers)
balance = response.json()
print(f"è´¦æˆ·ä½™é¢: {balance['data']['balance']} å…ƒ")

# åˆ›å»ºå®ä¾‹
create_url = "https://www.chenyu.team/api/open/v2/instance/create_by_pod"
data = {
    "pod_uuid": "pod_xxx",
    "gpu_uuid": "gpu_xxx",
    "auto_start": 1
}
response = requests.post(create_url, headers=headers, json=data)
instance = response.json()
print(f"å®ä¾‹åˆ›å»ºæˆåŠŸ: {instance['data']['instance_uuid']}")
```

```javascript JavaScript
const axios = require('axios');

const headers = {
    'Authorization': 'Bearer YOUR_API_KEY',
    'Content-Type': 'application/json'
};

// è·å–è´¦æˆ·ä¿¡æ¯
const balanceUrl = 'https://www.chenyu.team/api/open/v2/balance/info';
const balanceResponse = await axios.get(balanceUrl, { headers });
console.log(`è´¦æˆ·ä½™é¢: ${balanceResponse.data.data.balance} å…ƒ`);

// åˆ›å»ºå®ä¾‹
const createUrl = 'https://www.chenyu.team/api/open/v2/instance/create_by_pod';
const data = {
    pod_uuid: 'pod_xxx',
    gpu_uuid: 'gpu_xxx',
    auto_start: 1
};
const instanceResponse = await axios.post(createUrl, data, { headers });
console.log(`å®ä¾‹åˆ›å»ºæˆåŠŸ: ${instanceResponse.data.data.instance_uuid}`);
```

```go Go
package main

import (
    "bytes"
    "encoding/json"
    "fmt"
    "io/ioutil"
    "net/http"
)

func main() {
    apiKey := "YOUR_API_KEY"
    
    // è·å–è´¦æˆ·ä¿¡æ¯
    balanceURL := "https://www.chenyu.team/api/open/v2/balance/info"
    req, _ := http.NewRequest("GET", balanceURL, nil)
    req.Header.Set("Authorization", "Bearer "+apiKey)
    req.Header.Set("Content-Type", "application/json")
    
    client := &http.Client{}
    resp, err := client.Do(req)
    if err != nil {
        panic(err)
    }
    defer resp.Body.Close()
    
    body, _ := ioutil.ReadAll(resp.Body)
    fmt.Printf("è´¦æˆ·ä¿¡æ¯: %s\n", string(body))
    
    // åˆ›å»ºå®ä¾‹
    createURL := "https://www.chenyu.team/api/open/v2/instance/create_by_pod"
    data := map[string]interface{}{
        "pod_uuid":   "pod_xxx",
        "gpu_uuid":   "gpu_xxx",
        "auto_start": 1,
    }
    jsonData, _ := json.Marshal(data)
    
    req2, _ := http.NewRequest("POST", createURL, bytes.NewBuffer(jsonData))
    req2.Header.Set("Authorization", "Bearer "+apiKey)
    req2.Header.Set("Content-Type", "application/json")
    
    resp2, err := client.Do(req2)
    if err != nil {
        panic(err)
    }
    defer resp2.Body.Close()
    
    body2, _ := ioutil.ReadAll(resp2.Body)
    fmt.Printf("åˆ›å»ºå®ä¾‹ç»“æœ: %s\n", string(body2))
}
```

</CodeGroup>

## çŠ¶æ€ç è¯´æ˜

### HTTPçŠ¶æ€ç 

| çŠ¶æ€ç  | æè¿° | è¯´æ˜ |
|--------|------|------|
| 200 | OK | è¯·æ±‚æˆåŠŸ |
| 400 | Bad Request | è¯·æ±‚å‚æ•°é”™è¯¯ |
| 401 | Unauthorized | è®¤è¯å¤±è´¥ |
| 403 | Forbidden | æƒé™ä¸è¶³ |
| 404 | Not Found | èµ„æºä¸å­˜åœ¨ |
| 429 | Too Many Requests | è¯·æ±‚è¿‡äºé¢‘ç¹ |
| 500 | Internal Server Error | æœåŠ¡å™¨å†…éƒ¨é”™è¯¯ |

### ä¸šåŠ¡çŠ¶æ€ç 

| ä¸šåŠ¡ç  | æè¿° | è§£å†³æ–¹æ¡ˆ |
|--------|------|----------|
| 200 | æ“ä½œæˆåŠŸ | - |
| 400 | è¯·æ±‚å‚æ•°é”™è¯¯ | æ£€æŸ¥è¯·æ±‚å‚æ•°æ ¼å¼å’Œå¿…å¡«é¡¹ |
| 401 | API Keyæ— æ•ˆ | æ£€æŸ¥API Keyæ˜¯å¦æ­£ç¡® |
| 402 | è´¦æˆ·ä½™é¢ä¸è¶³ | è¯·å……å€¼è´¦æˆ·ä½™é¢ |
| 403 | æƒé™ä¸è¶³ | æ£€æŸ¥API Keyæƒé™è®¾ç½® |
| 404 | èµ„æºä¸å­˜åœ¨ | ç¡®è®¤èµ„æºIDæ˜¯å¦æ­£ç¡® |
| 429 | è¯·æ±‚é¢‘ç‡è¶…é™ | é™ä½è¯·æ±‚é¢‘ç‡ |
| 503 | èµ„æºä¸å¯ç”¨ | ç¨åé‡è¯•æˆ–é€‰æ‹©å…¶ä»–èµ„æº |

## é™æµè§„åˆ™

ä¸ºäº†ä¿è¯æœåŠ¡ç¨³å®šæ€§ï¼Œæˆ‘ä»¬å¯¹APIè¯·æ±‚å®æ–½äº†é™æµæªæ–½ï¼š

<Tabs>
  <Tab title="æ ‡å‡†é™æµ">
    - **è¯·æ±‚é¢‘ç‡**: æ¯ç§’æœ€å¤š10ä¸ªè¯·æ±‚
    - **å¹¶å‘é™åˆ¶**: æœ€å¤š5ä¸ªå¹¶å‘è¯·æ±‚
    - **è¶…é™å¤„ç†**: è¿”å›429çŠ¶æ€ç 
  </Tab>
  <Tab title="ä¼ä¸šå®¢æˆ·">
    - **è¯·æ±‚é¢‘ç‡**: æ¯ç§’æœ€å¤š100ä¸ªè¯·æ±‚
    - **å¹¶å‘é™åˆ¶**: æœ€å¤š20ä¸ªå¹¶å‘è¯·æ±‚
    - **ä¸“å±æ”¯æŒ**: å¯ç”³è¯·æé«˜é™é¢
  </Tab>
</Tabs>

## é”™è¯¯å¤„ç†

### é”™è¯¯å“åº”æ ¼å¼

```json
{
  "code": 400,
  "message": "è¯·æ±‚å‚æ•°é”™è¯¯",
  "data": {
    "error": "invalid_parameter",
    "details": "pod_uuidå‚æ•°ä¸èƒ½ä¸ºç©º",
    "field": "pod_uuid"
  }
}
```

### é‡è¯•ç­–ç•¥

å»ºè®®é‡‡ç”¨æŒ‡æ•°é€€é¿ç­–ç•¥å¤„ç†ä¸´æ—¶æ€§é”™è¯¯ï¼š

```python
import time
import random

def retry_with_backoff(func, max_retries=3):
    for attempt in range(max_retries):
        try:
            return func()
        except Exception as e:
            if attempt == max_retries - 1:
                raise e
            
            # æŒ‡æ•°é€€é¿ + éšæœºæŠ–åŠ¨
            delay = (2 ** attempt) + random.uniform(0, 1)
            time.sleep(delay)
```

## ç‰ˆæœ¬æ§åˆ¶

### å½“å‰ç‰ˆæœ¬

- **APIç‰ˆæœ¬**: v1
- **å‘å¸ƒæ—¥æœŸ**: 2024-01-01
- **æ›´æ–°é¢‘ç‡**: æ¯æœˆæ›´æ–°

### ç‰ˆæœ¬å…¼å®¹æ€§

- **å‘åå…¼å®¹**: ç¡®ä¿å·²å‘å¸ƒçš„APIåœ¨æ–°ç‰ˆæœ¬ä¸­ä¿æŒå…¼å®¹
- **åºŸå¼ƒé€šçŸ¥**: åºŸå¼ƒçš„APIå°†æå‰3ä¸ªæœˆé€šçŸ¥
- **ç‰ˆæœ¬æ ‡è®°**: é€šè¿‡URLè·¯å¾„æ ‡è¯†ç‰ˆæœ¬ï¼ˆå¦‚`/v1/`ï¼‰

## æœ€ä½³å®è·µ

### ğŸ” å®‰å…¨å»ºè®®

- **API Keyç®¡ç†**: å°†API Keyå­˜å‚¨åœ¨ç¯å¢ƒå˜é‡ä¸­ï¼Œä¸è¦ç¡¬ç¼–ç 
- **HTTPSé€šä¿¡**: å§‹ç»ˆä½¿ç”¨HTTPSåè®®è¿›è¡ŒAPIè°ƒç”¨
- **æƒé™æ§åˆ¶**: ä¸ºä¸åŒç”¨é€”åˆ›å»ºä¸åŒæƒé™çš„API Key
- **å®šæœŸè½®æ¢**: å®šæœŸæ›´æ–°API Keyä»¥æé«˜å®‰å…¨æ€§

### ğŸš€ æ€§èƒ½ä¼˜åŒ–

- **è¯·æ±‚åˆå¹¶**: å°½é‡åˆå¹¶å¤šä¸ªç›¸å…³è¯·æ±‚
- **ç¼“å­˜æœºåˆ¶**: å¯¹ä¸å¸¸å˜åŒ–çš„æ•°æ®è¿›è¡Œé€‚å½“ç¼“å­˜
- **å¹¶å‘æ§åˆ¶**: æ§åˆ¶å¹¶å‘è¯·æ±‚æ•°é‡ï¼Œé¿å…è§¦å‘é™æµ
- **é”™è¯¯å¤„ç†**: å®ç°å®Œå–„çš„é”™è¯¯å¤„ç†å’Œé‡è¯•æœºåˆ¶

### ğŸ“Š ç›‘æ§å»ºè®®

- **è¯·æ±‚æ—¥å¿—**: è®°å½•æ‰€æœ‰APIè¯·æ±‚å’Œå“åº”
- **æ€§èƒ½ç›‘æ§**: ç›‘æ§APIè°ƒç”¨å»¶è¿Ÿå’ŒæˆåŠŸç‡
- **å‘Šè­¦è®¾ç½®**: è®¾ç½®å¼‚å¸¸æƒ…å†µçš„å‘Šè­¦æœºåˆ¶
- **ä½¿ç”¨åˆ†æ**: å®šæœŸåˆ†æAPIä½¿ç”¨æ¨¡å¼å’Œä¼˜åŒ–ç‚¹

## è·å–å¸®åŠ©

<CardGroup cols={2}>
  <Card title="APIæ–‡æ¡£" icon="book" href="/api-reference/instances">
    æŸ¥çœ‹è¯¦ç»†çš„APIæ¥å£æ–‡æ¡£å’Œç¤ºä¾‹
  </Card>
  <Card title="SDKæ–‡æ¡£" icon="code" href="/sdk">
    æŸ¥çœ‹å„è¯­è¨€SDKçš„ä½¿ç”¨æŒ‡å—
  </Card>
  <Card title="å¸¸è§é—®é¢˜" icon="question" href="/faq">
    æŸ¥çœ‹APIä½¿ç”¨çš„å¸¸è§é—®é¢˜å’Œè§£å†³æ–¹æ¡ˆ
  </Card>
  <Card title="æŠ€æœ¯æ”¯æŒ" icon="headset" href="mailto:support@chenyu.com">
    è”ç³»æŠ€æœ¯æ”¯æŒè·å–ä¸“ä¸šå¸®åŠ©
  </Card>
</CardGroup>

---

<Info>
  **å¼€å‘è€…å‹å¥½** - æˆ‘ä»¬è‡´åŠ›äºæä¾›ç®€å•æ˜“ç”¨çš„APIæ¥å£ã€‚å¦‚æœæ‚¨åœ¨ä½¿ç”¨è¿‡ç¨‹ä¸­æœ‰ä»»ä½•å»ºè®®æˆ–é—®é¢˜ï¼Œè¯·éšæ—¶è”ç³»æˆ‘ä»¬çš„æŠ€æœ¯å›¢é˜Ÿã€‚
</Info>